<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Rato 3D</title>
    <script src="main.js"></script>
    <script src="matrizes.js"></script>

    <script id="vertex-shader" type="notjs">
        attribute vec4 position;
        attribute vec4 color;     // Atributo de cor 
        attribute vec2 texCoord;  // Atributo de textura 

        uniform mat4 transf;      //matriz Model-View-Projection

        varying vec4 v_color;
        varying vec2 v_texCoord;

        void main() {
            v_color = color;
            v_texCoord = texCoord;
            gl_Position = transf * position;
        }
    </script>

    <script id="frag-shader" type="notjs">
        precision mediump float;

        uniform sampler2D tex;
        uniform float u_useTexture; // Interruptor: 0 = Cor, 1 = Textura

        varying vec4 v_color;
        varying vec2 v_texCoord;

        void main() {
            vec4 texColor = texture2D(tex, v_texCoord);
            
            if(u_useTexture > 0.5) {
                gl_FragColor = texColor * v_color; // Combina os dois
            } else {
                gl_FragColor = v_color; // Usa apenas a cor do v√©rtice
            }
        }
    </script>
</head>

<body onload="init()">
    <canvas id="glcanvas1" width="900" height="700"></canvas>
</body>
</html>